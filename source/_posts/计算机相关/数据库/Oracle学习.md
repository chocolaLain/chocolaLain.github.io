---
title: Oracle学习
date: 2018-11-19 21:20:11
tags:
	- 数据库
	- Oracle
categories: 数据库
---
资源:[Oracle从入门到精通教程全套_数据库实战精讲_动力节点](https://www.bilibili.com/video/av14537979/?p=1)
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=22678955&auto=0&height=66"></iframe>
[oracle 10G函数大全.chm](http://pi67irekk.bkt.clouddn.com/oracle%2010G%E5%87%BD%E6%95%B0%E5%A4%A7%E5%85%A8.chm)
<!-- more -->

-------------

## Oracle中的函数
* 不同于java,oracle里面的函数必须要有一个返回结果.
* 单行函数：每次取一条记录，作为函数的参数，得到这条记录对应的单个结果.例如LENGTH( ),对每条记录返回一个结果.
	- 单行函数可以对数据进行复杂的计算，也可以进行数据类型的转换，还可以对特殊的数据进行处理。
	- 另外，单行函数还可以嵌套。一个函数可以作为另一个函数的输入参数
	- 大体上分为字符函数 数字函数 转换函数 日期类型 其他函数(主要是对空值进行处理)
		+ 大小写转换函数LOWER();UPPER();INITCAP(首字母大写其他字母小写);
		+ Oracle对字符型数据区分大小写,所以有时候忘了数据是不是大小写的时候可以用字符函数LOWER(),或者UPPER()来进行处理.
		+ 字符处理函数:
			- CONCAT(c1,c2) 连接两个字符串 同：c1||c2 合并字符双竖线;
			- SUBSTR(c1,n1,n2);取子字符串,在字符表达式c1里，从n1开始取n2个字符(注意,不是取到第n2位置的字符,而是往后取n2个字符);若不指定n2,则从第y个字符直到结束的字串
			- LENGTH();计算长度
			- INSTR();
			{% fold 点击显/隐内容 %}
			```
			INSTR(C1,C2,I,J)
			【功能】在一个字符串中搜索指定的字符,返回发现指定的字符的位置;
			【说明】多字节符(汉字、全角符等)，按1个字符计算
			【参数】
			C1    被搜索的字符串
			C2    希望搜索的字符串
			I     搜索的开始位置,默认为1
			J     第J次出现的位置,默认为1
			【返回】数值
			【示例】select instr('oracle traning','ra',1,2) instring from dual;
			返回：9
			【示例】select instr('重庆某软件公司','某',1,1),instrb('重庆某软件公司','某',1,1) instring from dual;
			返回：3,5
			涉及汉字位置的要注意全角字符
			```
			{% endfold %}
			* LPAD|RPAD();
			{% fold 点击显/隐内容 %}
			```
			LPAD(c1,n,c2)
			【功能】在字符串c1的左边用字符串c2填充，直到长度为n时为止
			【参数】C1 字符串
			n 追加后字符总长度
			c2 追加字符串,默认为空格
			【返回】字符型
			【说明】如果c1长度大于n，则返回c1左边n个字符
			如果如果c1长度小于n，c2和c1连接后大于n，则返回连接后的右边n个字符
			【示例】
			SQL> select lpad('gao',10,'*') from dual;
			lpad('gao',10,'*')
			-----------------
			*******gao
			不够字符则用*来填满
			【相似】RPAD()在列的右边粘贴字符
			【相反】LTRIM() 删除左边出现的字符串
			```
			{% endfold %}
			* TRIM(c1 from c2)【功能】:删除左边和右边出现的字符串.【参数】:C2 删除前字符串c1 删除字符串,默认为空格.【返回】:字符型(LTRIM RTRIM类似)
			* REPLACE();
			{% fold 点击显/隐内容 %}
			```
			REPLACE(c1,c2,c3)
			【功能】将字符表达式值中，部分相同字符串，替换成新的字符串
			【参数】
			c1   希望被替换的字符或变量 
			c2   被替换的字符串
			c3   要替换的字符串，默认为空(即删除之意，不是空格)
			```
			{% endfold %}
		* 数字函数:是对数字进行操作的函数，这类函数比较少，也比较简单。只有三种：对数字四舍五入的ROUND函数(要四舍五入的数值,四舍五入到多少位(可以填-1,那就是到十位))；对数字进行截取的TRUNC函数(样式同前面,但是不管四舍五入)；求模或求余的MOD函数(SAL,300)(得到SAL除以300得到的余数).
		* 日期函数:
		{% fold 点击显/隐内容 %}
		```
		◆日期函数对日期数据进行处理，得到新的日期或者数字
		◆Oracle以内部数字格式存储日期：世纪，年，月，日，小时，分钟，秒
		◆缺省的日期格式是DD-MON-YY(年月日)
		* 搜索日期的时候默认格式例如'20-2月-19811'
		◆Oracle内置的SYSDATE函函数，是返回日期和时间的函数
		SQL> SELECT SYSDATE AS"时间”
		2  FROM  SYS.DUAL；
		时间
		------------
		2007-7-242
		```
		![](http://lainundalice.oss-cn-beijing.aliyuncs.com/18-12-13/88670870.jpg)
		SYSDATE - 日期可以得到一个天数.
		{% endfold %}
			* MONTHS_BETWEEN:两日期相差多少月(精确到月,前面那种算出天数再算出月有误差.)
			months_between(d1,d2)如果d1大于d2，则返回正数如果d1小于d2，则返回负数(返回一个数字)
			* add_months(d1,n1):返回在日期d1(日期)基础上再加n1(数字)个月后新的日期。(返回日期)(精确的转正日期)
			![](http://lainundalice.oss-cn-beijing.aliyuncs.com/18-12-13/23419468.jpg)
			* next_day(d1,c1):
				- 【功能】：返回日期d1在下周，星期几(参数c1)的日期
				【参数】：d1日期型,c1为字符型(参数)，c1默认为j（即当前日期)
				【参数表】：c1对应:星期一，星期二，星期三……星期日
				【返回】：日期
				【示例】
				select sysdate 当时日期,
				next_day(sysdate,'星期日') 下周星期日 from dual;
			* last_day(d1):
				- 【功能】：返回日期d1所在月份最后一天的日期。
				【参数】：d1，日期型
				【返回】：日期
			* round(d1,c1):【功能】：给出日期d1按期间(参数c1)四舍五入后的期间的第一天日期（与数值四舍五入意思相近）
			**去看文档**

		* 转换函数:有两种方式,隐式转换(oracle自动转换),显式转换
		oracle中关于数据有三种类型且可以相互转化:(转化为to_number())数值型; 
		(转化为to_char())字符型;
		(转化为to_date())日期型;
		![](http://lainundalice.oss-cn-beijing.aliyuncs.com/18-12-13/77484404.jpg)
		三种类型 四种转化
		注意数值没法转化为日期,数值只有数字的形式.

* 多行函数：一次性把多条记录当作参数输入给函数，得到多条记录对应的当个结果.例如MAX( ),对比多个参数得到最大的那个参数.
